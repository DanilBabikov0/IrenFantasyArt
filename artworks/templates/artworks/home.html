{% extends 'artworks/base.html' %}
{% load static %}

{% block title %}Главная | IrenFantasyArt{% endblock %}

{% block meta_description %}
Авторские картины маслом и пастелью для интерьера. Оригинальные работы в единственном экземпляре. Покупка напрямую у художника.
{% endblock %}

{% block meta_keywords %}картины, художник, оригинальные картины, заказать картину{% endblock %}

{% block og_title %}Главная | IrenFantasyArt{% endblock %}
{% block og_description %}Авторские картины маслом и пастелью для интерьера. Оригинальные работы в единственном экземпляре. Покупка напрямую у художника.{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/home.css' %}">
{% endblock %}

{% block content %}
<!-- Герой-секция -->
<section class="hero-section mb-5">
    <div class="container">
        <div class="row align-items-center">
            <!-- Текстовая часть -->
            <div class="col-lg-6 mb-5 mb-lg-0">
                <h1 class="hero-title mb-4">Художник Ирина Бабикова</h1>
                <p class="hero-subtitle lead mb-4">Оригинальные картины пастелью, маслом</p>
                
                <div class="hero-buttons d-flex flex-wrap gap-3">
                    <a href="{% url 'catalog' %}" class="btn btn-primary btn-lg px-4">
                        <i class="bi bi-palette me-2"></i>Смотреть каталог
                    </a>
                </div>
                
                <div class="mt-5">
                    <div class="d-flex align-items-center">
                        <div class="me-3">
                            <i class="bi bi-stars text-warning fs-4"></i>
                        </div>
                        <div>
                            <p class="mb-1">Уникальные работы ручной работы</p>
                            <small class="text-muted">Каждая картина — это эксклюзивный экземпляр</small>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Слайдер лучших работ -->
            <div class="col-lg-6">
                {% if featured_artworks %}
                <div id="heroCarousel" class="carousel slide" data-bs-ride="carousel">
                    <div class="carousel-inner rounded-3 shadow-lg">
                        {% for artwork in featured_artworks %}
                        <div class="carousel-item {% if forloop.first %}active{% endif %}">
                            <a href="{{ artwork.get_absolute_url }}" class="d-block">
                                {% if artwork.images.all %}
                                <img src="{{ artwork.images.first.image.url }}" 
                                     class="d-block w-100 hero-image" 
                                     alt="{{ artwork.title }}"
                                     loading="eager">
                                {% else %}
                                <div class="hero-placeholder bg-light d-flex align-items-center justify-content-center" 
                                     style="height: 500px;">
                                    <i class="bi bi-image text-muted fs-1"></i>
                                </div>
                                {% endif %}
                            </a>
                        </div>
                        {% endfor %}
                    </div>
                    
                    {% if featured_artworks|length > 1 %}
                    <!-- Кнопки навигации -->
                    <button class="carousel-control-prev" type="button" data-bs-target="#heroCarousel" data-bs-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Предыдущий</span>
                    </button>
                    <button class="carousel-control-next" type="button" data-bs-target="#heroCarousel" data-bs-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Следующий</span>
                    </button>
                    {% endif %}
                </div>
                {% else %}
                <!-- Заглушка если нет лучших работ -->
                <div class="hero-placeholder bg-light rounded-3 shadow-lg d-flex align-items-center justify-content-center" 
                     style="height: 500px;">
                    <div class="text-center">
                        <i class="bi bi-palette text-muted fs-1 mb-3"></i>
                        <p class="text-muted">Скоро появятся новые работы</p>
                    </div>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</section>

<!-- Категории картин -->
<section class="categories-section mb-5">
    <div class="container">
        <h2 class="section-title mb-5">Категории картин</h2>
        
        <div class="row row-cols-1 row-cols-md-2 row-cols-lg-4 g-4">
            <!-- Масло -->
            <div class="col">
                <a href="{% url 'catalog' %}?category=1" class="category-card card border-0 shadow-sm h-100 text-decoration-none">
                    <div class="category-image-wrapper">
                        {% if oil_artwork and oil_artwork.images.all %}
                        <img src="{{ oil_artwork.images.first.image.url }}" 
                             class="category-image" 
                             alt="Картины маслом"
                             loading="lazy">
                        {% else %}
                        <div class="category-placeholder bg-light d-flex align-items-center justify-content-center">
                            <i class="bi bi-palette text-muted fs-1"></i>
                        </div>
                        {% endif %}
                    </div>
                    <div class="card-body text-center">
                        <h5 class="card-title text-dark mb-1">Картины маслом</h5>
                        <p class="text-muted small">Масляная живопись на холсте</p>
                        <span class="btn btn-sm btn-outline-primary mt-2">
                            Смотреть <i class="bi bi-arrow-right ms-1"></i>
                        </span>
                    </div>
                </a>
            </div>
            
            <!-- Пастель -->
            <div class="col">
                <a href="{% url 'catalog' %}?category=2" class="category-card card border-0 shadow-sm h-100 text-decoration-none">
                    <div class="category-image-wrapper">
                        {% if pastel_artwork and pastel_artwork.images.all %}
                        <img src="{{ pastel_artwork.images.first.image.url }}" 
                             class="category-image" 
                             alt="Картины пастелью"
                             loading="lazy">
                        {% else %}
                        <div class="category-placeholder bg-light d-flex align-items-center justify-content-center">
                            <i class="bi bi-palette text-muted fs-1"></i>
                        </div>
                        {% endif %}
                    </div>
                    <div class="card-body text-center">
                        <h5 class="card-title text-dark mb-1">Картины пастелью</h5>
                        <p class="text-muted small">Сухая пастель на бумаге</p>
                        <span class="btn btn-sm btn-outline-primary mt-2">
                            Смотреть <i class="bi bi-arrow-right ms-1"></i>
                        </span>
                    </div>
                </a>
            </div>
            
            <!-- Маленькие -->
            <div class="col">
                <a href="{% url 'catalog' %}?size=small" class="category-card card border-0 shadow-sm h-100 text-decoration-none">
                    <div class="category-image-wrapper">
                        {% if small_artwork and small_artwork.images.all %}
                        <img src="{{ small_artwork.images.first.image.url }}" 
                             class="category-image" 
                             alt="Маленькие картины"
                             loading="lazy">
                        {% else %}
                        <div class="category-placeholder bg-light d-flex align-items-center justify-content-center">
                            <i class="bi bi-palette text-muted fs-1"></i>
                        </div>
                        {% endif %}
                    </div>
                    <div class="card-body text-center">
                        <h5 class="card-title text-dark mb-1">Маленькие картины</h5>
                        <p class="text-muted small">До 25×25 см</p>
                        <span class="btn btn-sm btn-outline-primary mt-2">
                            Смотреть <i class="bi bi-arrow-right ms-1"></i>
                        </span>
                    </div>
                </a>
            </div>
            
            <!-- Большие -->
            <div class="col">
                <a href="{% url 'catalog' %}?size=large" class="category-card card border-0 shadow-sm h-100 text-decoration-none">
                    <div class="category-image-wrapper">
                        {% if large_artwork and large_artwork.images.all %}
                        <img src="{{ large_artwork.images.first.image.url }}" 
                             class="category-image" 
                             alt="Большие картины"
                             loading="lazy">
                        {% else %}
                        <div class="category-placeholder bg-light d-flex align-items-center justify-content-center">
                            <i class="bi bi-palette text-muted fs-1"></i>
                        </div>
                        {% endif %}
                    </div>
                    <div class="card-body text-center">
                        <h5 class="card-title text-dark mb-1">Большие картины</h5>
                        <p class="text-muted small">Свыше 40×60 см</p>
                        <span class="btn btn-sm btn-outline-primary mt-2">
                            Смотреть <i class="bi bi-arrow-right ms-1"></i>
                        </span>
                    </div>
                </a>
            </div>
        </div>
    </div>
</section>

<!-- Последние посты из блога -->
{% if recent_posts %}
<section class="recent-posts mb-5">
    <div class="container">
        <div class="row mb-4">
            <div class="col-12">
                <div class="d-flex justify-content-between align-items-center">
                    <h2 class="section-title">Последние посты</h2>
                    {% url 'blog:post_list' as blog_url %}
                    {% if blog_url %}
                    <a href="{{ blog_url }}" class="btn btn-outline-primary">
                        Все статьи <i class="bi bi-arrow-right ms-1"></i>
                    </a>
                    {% endif %}
                </div>
            </div>
        </div>
        
        <div class="row row-cols-1 row-cols-md-2 row-cols-lg-4 g-4">
            {% for post in recent_posts %}
            <div class="col">
                <div class="post-card card border-0 shadow-sm h-100">
                    <a href="{{ post.get_absolute_url }}" class="text-decoration-none">
                        {% if post.image %}
                        <div class="card-img-wrapper">
                            <img src="{{ post.image.url }}" 
                                 class="card-img-top" 
                                 alt="{{ post.title }}" 
                                 loading="lazy">
                        </div>
                        {% else %}
                        <div class="card-img-top bg-light d-flex align-items-center justify-content-center" 
                             style="height: 200px;">
                            <i class="bi bi-file-text text-muted fs-1"></i>
                        </div>
                        {% endif %}
                        <div class="card-body">
                            <h5 class="card-title text-dark mb-2">{{ post.title|truncatechars:50 }}</h5>
                            <p class="text-muted small mb-3">
                                <i class="bi bi-calendar3 me-1"></i>
                                {{ post.created_at|date:"d.m.Y" }}
                            </p>
                            <p class="card-text text-muted small">{{ post.excerpt|truncatechars:100|default:"" }}</p>
                        </div>
                    </a>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}

<!-- Призыв к действию -->
<section class="cta-section">
    <div class="container">
        <div class="cta-card card border-0 shadow-lg">
            <div class="card-body p-4 p-lg-5">
                <div class="row align-items-center">
                    <div class="col-lg-8 mb-4 mb-lg-0">
                        <h2 class="cta-title mb-3">Хотите картину в вашем интерьере?</h2>
                        <p class="cta-subtitle lead mb-4">Ищете подарок с душой? Уникальная картина создаст атмосферу волшебства в вашем доме или станет незабываемым подарком.</p>
                        
                        <div class="cta-info d-flex align-items-center">
                            <div class="me-3">
                                <i class="bi bi-clock fs-4"></i>
                            </div>
                            <div>
                                <p class="mb-0 fw-medium">Отвечаю в течение 24 часов</p>
                                <small class="text-muted">Быстрая связь для уточнения деталей</small>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-lg-4">
                        <div class="d-grid gap-3">
                            <a href="{% url 'contact' %}" class="btn btn-primary btn-lg">
                                <i class="bi bi-envelope me-2"></i>Написать мне
                            </a>
                            <a href="{% url 'catalog' %}" class="btn btn-outline-primary btn-lg">
                                <i class="bi bi-palette me-2"></i>Посмотреть каталог
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Автопрокрутка карусели
    const heroCarousel = document.getElementById('heroCarousel');
    if (heroCarousel) {
        const carousel = new bootstrap.Carousel(heroCarousel, {
            interval: 5000,
            wrap: true
        });
        
        // Останавливаем при наведении
        heroCarousel.addEventListener('mouseenter', function() {
            carousel.pause();
        });
        
        heroCarousel.addEventListener('mouseleave', function() {
            carousel.cycle();
        });
    }
    
    // Анимация карточек при скролле
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    };
    
    const observer = new IntersectionObserver(function(entries) {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('animate-in');
            }
        });
    }, observerOptions);
    
    document.querySelectorAll('.artwork-card, .post-card').forEach(card => {
        observer.observe(card);
    });
});
</script>
{% endblock %}